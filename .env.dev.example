# Tools Dashboard - Environment Variables

#
# Shared environment variables
#

# Base URL for the authentication service (back-auth) exposed to front-public.
# When running via docker-compose, point to the internal service hostname.
# Override to http://localhost:8101 only if you run front-public outside Docker.
BACK_AUTH_BASE_URL=http://back-auth:8001

# Public URL where the Remix app is served (used for verification links).
PUBLIC_APP_BASE_PATH=/app

# =============================================================================
# ADMIN RBAC & AUTHENTICATION
# =============================================================================

# Default admin user credentials (created automatically on first startup)
# ⚠️  SECURITY WARNING: Change these values immediately in production!
# The default admin user is created with these credentials to allow initial access.
DEFAULT_ADMIN_EMAIL=admin@example.com
DEFAULT_ADMIN_PASSWORD=Admin123!ChangeMe

# JWT token configuration
# ⚠️  SECURITY WARNING: Use a strong, randomly generated secret key in production!
# Generate a secure key: openssl rand -base64 32
JWT_SECRET_KEY=your-secret-key-change-in-production-please
JWT_ALGORITHM=HS256

# =============================================================================
# DATABASE CONNECTIONS
# =============================================================================

# PostgreSQL (user accounts, financial data)
DATABASE_URL=postgresql+asyncpg://user:pass@postgresql:5432/main_db

# Redis (cache, pub/sub, sessions)
REDIS_URL=redis://redis:6379/0

# Cassandra (extended profiles, time-series data)
CASSANDRA_CONTACT_POINTS=cassandra # or "back-cassandra"?
CASSANDRA_PORT=9042
CASSANDRA_KEYSPACE=auth_events # or "auth_events_dev" or "tools_dashboard"

# =============================================================================
# AUTHENTICATION & SESSION SETTINGS
# =============================================================================

# Public application base URL (used for email verification links)
PUBLIC_APP_BASE_URL=http://epicdev.com/app

# Email verification path
VERIFICATION_PATH=/features/user-registration/verify

# Password requirements
REGISTRATION_PASSWORD_MIN_LENGTH=12

# Token TTL settings
REGISTRATION_TOKEN_TTL_MINUTES=15
REFRESH_TOKEN_TTL_DAYS=7

# Session cookie configuration
SESSION_COOKIE_NAME=td_session
SESSION_COOKIE_SECURE=false  # Set to true in production with HTTPS
SESSION_COOKIE_SAMESITE=Lax
SESSION_COOKIE_MAX_AGE=604800  # 7 days in seconds
SESSION_COOKIE_DOMAIN=

# CSRF protection
REGISTRATION_CSRF_COOKIE_SECURE=false
REGISTRATION_CSRF_COOKIE_SAMESITE=Lax
REGISTRATION_CSRF_COOKIE_MAX_AGE=900
REGISTRATION_CSRF_COOKIE_DOMAIN=

# =============================================================================
# OAUTH / SOCIAL LOGIN
# =============================================================================

# Google OAuth configuration (optional)
# ⚠️  IMPORTANT: Redirect URI must NOT include query parameters
# Query parameters (?provider=google) are added automatically by the OAuth flow
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
GOOGLE_OAUTH_REDIRECT_URI=http://epicdev.com/app/features/user-registration/verify?provider=google
GOOGLE_OAUTH_SCOPES=openid email profile
GOOGLE_OAUTH_ALLOWED_DOMAINS=
GOOGLE_OAUTH_BUTTON_TEXT=Sign in with Google

# =============================================================================
# EMAIL / SMTP CONFIGURATION
# =============================================================================

# SMTP settings for sending verification emails
MAIL_HOST=mailhog
MAIL_PORT=1025
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_SENDER=no-reply@tools-dashboard.local
MAIL_USE_TLS=true

# =============================================================================
# DEVELOPMENT NOTES
# =============================================================================

# For local development with Docker Compose:
# 1. Copy this file to .env: cp .env.example .env
# 2. Update the values as needed for your local environment
# 3. Never commit .env to version control (it's in .gitignore)

# For production deployment:
# 1. Generate strong random values for all secrets
# 2. Use environment-specific values for URLs and domains
# 3. Enable HTTPS and set SECURE cookie flags to true
# 4. Store secrets in a secure vault (AWS Secrets Manager, etc.)
# 5. Rotate JWT_SECRET_KEY and DEFAULT_ADMIN_PASSWORD regularly

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================

# [ ] DEFAULT_ADMIN_PASSWORD changed from default value
# [ ] JWT_SECRET_KEY is a strong random value (min 32 characters)
# [ ] SESSION_COOKIE_SECURE=true in production (requires HTTPS)
# [ ] REGISTRATION_CSRF_COOKIE_SECURE=true in production (requires HTTPS)
# [ ] MAIL_* settings configured for production email service
# [ ] All sensitive credentials stored in secure vault
# [ ] Environment variables not exposed in logs or error messages
